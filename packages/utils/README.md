<div align='center'>
  <img src='https://i.imgur.com/ZzjmE8i.png' />
</div>

<br />

<div align='center'>
  <a href='https://github.com/nitreojs/puregram'><b><code>puregram</code></b></a>
  <span>&nbsp;â€¢&nbsp;</span>
  <a href='#list-of-methods--getters'><b>Functions</b></a>
  <span>&nbsp;â€¢&nbsp;</span>
  <a href='https://t.me/puregram'><b>Channel</b></a>
  <span>&nbsp;â€¢&nbsp;</span>
  <a href='https://github.com/nitreojs/puregram#faq'><b>FAQ</b></a>
</div>

## @puregram/utils

_Package, containing some useful utilities for `puregram` package_

### Introduction

This package exists only for one main reason: basically not everyone wants to have such utils as `getCasinoValues` and `<insert one more here>` when installing `puregram`, so these functions were moved to separated package

### Example
```js
const { Telegram } = require('puregram');
const { getCasinoValues } = require('@puregram/utils');

const telegram = new Telegram({
  token: process.env.TOKEN
});

telegram.updates.on('message', (context) => {
  if (context.hasDice && context.dice.emoji === 'ðŸŽ°') {
    console.log(getCasinoValues(context.dice.value)); // e.g. ['seven', 'bar', 'grapes']
  }
});

telegram.updates.startPolling();
```

### Installation

```sh
$ yarn add @puregram/utils
$ npm i -S @puregram/utils
```

---

## List of utilities

### `WebApp`

#### `generateSecretKey(token: string)`

_Returns_: `Promise<WebAppGenerateSecretKeyResult>`

Returns _secret key_ generated by the `token`

```js
const { key } = await WebApp.generateSecretKey(BOT_TOKEN)
```

#### `parseInitData(initData: string)`

_Returns_: `string`

Returns _parsed init data_

```js
const data = WebApp.parseInitData(initData)
```

#### `generateInitDataHash(initData: string, key: Buffer)`

_Returns_: `Promise<WebAppGenerateInitDataHashResult>`

Returns _init data hash_ generated by the `key`

```js
const { hash } = await WebApp.generateInitDataHash(initData, secretKey)
```

#### `validate(params: WebAppValidateInitDataParams)`

_Returns_: `Promise<WebAppValidateResult>`

Returns whether `params.initData` is valid or not

```js
const { valid } = await WebApp.validate({ initData, key: secretKey })
```

### `getCasinoValues(value: number | string)`

_Returns_: `SlotMachineValue`

Returns an _array of `CasinoValue`_ detected by `value` in the dice

```js
if (context.hasDice && context.dice.emoji === 'ðŸŽ°') {
  return context.send(`You've got ${getCasinoValues(context.dice.value).join(', ')}!`)
}
```
